import{S as e,i as t,s,a as n,e as l,b as r,c as o,d as a,f as i,g as c,h,j as f,k as u,l as d,t as p,m as v,n as m,o as g,p as b,q as y,r as w,u as T,v as E,w as x,x as D,y as A,z as I,A as S,B,C as M,D as P,E as k,F as N,G as $,H,I as O,J as q}from"./vendor.3e44964a.js";const{window:F}=I;function U(e,t,s){const n=e.slice();return n[30]=t[s],n[32]=s,n}function W(e,t,s){const n=e.slice();return n[33]=t[s],n[35]=s,n}function C(e){let t,s=Array(Math.ceil(e[3].length/e[0])),n=[];for(let l=0;l<s.length;l+=1)n[l]=L(U(e,s,l));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=l()},l(e){for(let t=0;t<n.length;t+=1)n[t].l(e);t=l()},m(e,s){for(let t=0;t<n.length;t+=1)n[t].m(e,s);r(e,t,s)},p(e,l){if(9&l[0]){let r;for(s=Array(Math.ceil(e[3].length/e[0])),r=0;r<s.length;r+=1){const o=U(e,s,r);n[r]?n[r].p(o,l):(n[r]=L(o),n[r].c(),n[r].m(t.parentNode,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}},d(e){g(n,e),e&&f(t)}}}function z(e){let t,s,n=`0${e[3][e[32]*e[0]+e[35]].toString(16).toUpperCase()}`.slice(-2)+"";return{c(){t=o("span"),s=p(n),this.h()},l(e){t=i(e,"SPAN",{class:!0});var l=c(t);s=v(l,n),l.forEach(f),this.h()},h(){u(t,"class","row-item svelte-1q6usyt")},m(e,n){r(e,t,n),d(t,s)},p(e,t){9&t[0]&&n!==(n=`0${e[3][e[32]*e[0]+e[35]].toString(16).toUpperCase()}`.slice(-2)+"")&&m(s,n)},d(e){e&&f(t)}}}function L(e){let t,s,n=Array(e[0]),l=[];for(let r=0;r<n.length;r+=1)l[r]=z(W(e,n,r));return{c(){t=o("span");for(let e=0;e<l.length;e+=1)l[e].c();s=a(),this.h()},l(e){t=i(e,"SPAN",{class:!0});var n=c(t);for(let t=0;t<l.length;t+=1)l[t].l(n);s=h(n),n.forEach(f),this.h()},h(){u(t,"class","data-row svelte-1q6usyt")},m(e,n){r(e,t,n);for(let s=0;s<l.length;s+=1)l[s].m(t,null);d(t,s)},p(e,r){if(9&r[0]){let o;for(n=Array(e[0]),o=0;o<n.length;o+=1){const a=W(e,n,o);l[o]?l[o].p(a,r):(l[o]=z(a),l[o].c(),l[o].m(t,s))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){e&&f(t),g(l,e)}}}function V(e){var t;let s,l,g,x,D,A,I,S,B,M,P,k,N,$,H,O,q,U,W,z,L,V,G,R,j,_,J,K,Q,X,Y,Z,ee,te,se,ne,le,re;n(e[12]);let oe=(null==(t=e[3])?void 0:t.length)&&C(e);return{c(){s=o("div"),l=o("div"),g=a(),oe&&oe.c(),x=a(),D=o("div"),A=a(),I=o("table"),S=o("tr"),B=o("td"),M=o("button"),P=p("Dec"),k=o("button"),N=p("Inc"),$=a(),H=o("td"),O=o("input"),q=a(),U=o("label"),W=p("Top Offset:"),z=p(e[4]),L=a(),V=o("tr"),G=o("td"),R=o("button"),j=p("Toggle"),_=p(" Autoscroll:\r\n      "),J=o("span"),K=p(e[5]),Q=a(),X=o("tr"),Y=o("td"),Z=o("button"),ee=p("Toggle"),te=p(" Prevent Scroll Down Bug:\r\n      "),se=o("span"),ne=p(e[6]),this.h()},l(t){s=i(t,"DIV",{class:!0});var n=c(s);l=i(n,"DIV",{class:!0,style:!0}),c(l).forEach(f),g=h(n),oe&&oe.l(n),x=h(n),D=i(n,"DIV",{class:!0,style:!0}),c(D).forEach(f),n.forEach(f),A=h(t),I=i(t,"TABLE",{});var r=c(I);S=i(r,"TR",{});var o=c(S);B=i(o,"TD",{});var a=c(B);M=i(a,"BUTTON",{});var u=c(M);P=v(u,"Dec"),u.forEach(f),k=i(a,"BUTTON",{});var d=c(k);N=v(d,"Inc"),d.forEach(f),a.forEach(f),$=h(o),H=i(o,"TD",{});var p=c(H);O=i(p,"INPUT",{type:!0,min:!0,max:!0,name:!0}),q=h(p),U=i(p,"LABEL",{for:!0});var m=c(U);W=v(m,"Top Offset:"),z=v(m,e[4]),m.forEach(f),p.forEach(f),o.forEach(f),L=h(r),V=i(r,"TR",{});var b=c(V);G=i(b,"TD",{colspan:!0});var y=c(G);R=i(y,"BUTTON",{});var w=c(R);j=v(w,"Toggle"),w.forEach(f),_=v(y," Autoscroll:\r\n      "),J=i(y,"SPAN",{style:!0});var T=c(J);K=v(T,e[5]),T.forEach(f),y.forEach(f),b.forEach(f),Q=h(r),X=i(r,"TR",{});var E=c(X);Y=i(E,"TD",{colspan:!0});var F=c(Y);Z=i(F,"BUTTON",{});var C=c(Z);ee=v(C,"Toggle"),C.forEach(f),te=v(F," Prevent Scroll Down Bug:\r\n      "),se=i(F,"SPAN",{style:!0});var le=c(se);ne=v(le,e[6]),le.forEach(f),F.forEach(f),E.forEach(f),r.forEach(f),this.h()},h(){u(l,"class","data-grid-space svelte-1q6usyt"),b(l,"height",e[7]+"px"),u(D,"class","data-grid-space svelte-1q6usyt"),b(D,"height",e[8]+"px"),u(s,"class","data-grid svelte-1q6usyt"),u(O,"type","range"),u(O,"min","-50"),u(O,"max","50"),u(O,"name","offset"),u(U,"for","offset"),b(J,"font-weight","bold"),u(G,"colspan","4"),b(se,"font-weight","bold"),u(Y,"colspan","4")},m(t,n){r(t,s,n),d(s,l),d(s,g),oe&&oe.m(s,null),d(s,x),d(s,D),e[13](s),r(t,A,n),r(t,I,n),d(I,S),d(S,B),d(B,M),d(M,P),d(B,k),d(k,N),d(S,$),d(S,H),d(H,O),y(O,e[4]),d(H,q),d(H,U),d(U,W),d(U,z),d(I,L),d(I,V),d(V,G),d(G,R),d(R,j),d(G,_),d(G,J),d(J,K),d(I,Q),d(I,X),d(X,Y),d(Y,Z),d(Z,ee),d(Y,te),d(Y,se),d(se,ne),le||(re=[w(F,"scroll",e[9],!0),w(F,"resize",e[12]),w(M,"click",e[14]),w(k,"click",e[15]),w(O,"change",e[16]),w(O,"input",e[16]),w(R,"click",e[17]),w(Z,"click",e[18])],le=!0)},p(e,t){var n;128&t[0]&&b(l,"height",e[7]+"px"),(null==(n=e[3])?void 0:n.length)?oe?oe.p(e,t):(oe=C(e),oe.c(),oe.m(s,x)):oe&&(oe.d(1),oe=null),256&t[0]&&b(D,"height",e[8]+"px"),16&t[0]&&y(O,e[4]),16&t[0]&&m(z,e[4]),32&t[0]&&m(K,e[5]),64&t[0]&&m(ne,e[6])},i:T,o:T,d(t){t&&f(s),oe&&oe.d(),e[13](null),t&&f(A),t&&f(I),le=!1,E(re)}}}function G(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(l,r){function o(e){try{i(n.next(e))}catch(t){r(t)}}function a(e){try{i(n.throw(e))}catch(t){r(t)}}function i(e){var t;e.done?l(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}i((n=n.apply(e,t||[])).next())}))};let l,r,o,a,i,c,{items:h}=t,{columns:f}=t,{cellHeight:u=21}=t,d=[],p=0,v=!1,m=!0;function g(){let e=l.scrollTop,t=l.scrollTop+a,n=Math.floor(e/u)*f,i=Math.ceil(t/u)*f;i=Math.min(h.length,i),[r,o]=[n,i],s(3,d=h.slice(n,i))}function b(){s(7,i=Math.floor(r/f)*u+p),s(8,c=Math.floor((h.length-o)/f)*u)}x((()=>n(void 0,void 0,void 0,(function*(){g(),b()}))));let y=0,w=0,T=0;D((()=>{var e;w=null!==(e=null==l?void 0:l.scrollTop)&&void 0!==e?e:0,m&&T<0&&s(1,l.scrollTop=l.scrollTop+T,l)})),A((()=>{var e;y=null!==(e=null==l?void 0:l.scrollTop)&&void 0!==e?e:0,T=w-y})),window.requestAnimationFrame((function e(){v&&s(1,l.scrollTop+=1,l),window.requestAnimationFrame(e)}));return e.$$set=e=>{"items"in e&&s(10,h=e.items),"columns"in e&&s(0,f=e.columns),"cellHeight"in e&&s(11,u=e.cellHeight)},[f,l,a,d,p,v,m,i,c,function(e){return n(this,void 0,void 0,(function*(){g(),b()}))},h,u,function(){s(2,a=F.innerHeight)},function(e){S[e?"unshift":"push"]((()=>{l=e,s(1,l)}))},()=>s(4,p--,p),()=>s(4,p++,p),function(){p=B(this.value),s(4,p)},()=>s(5,v=!v),()=>s(6,m=!m)]}class R extends e{constructor(e){super(),t(this,e,G,V,s,{items:10,columns:0,cellHeight:11},[-1,-1])}}function j(e){let t,s,n,l,m,g,b,y,w,T,E,x,D,A,I,B,F,U,W,C,z,L,V,G,j,J,K,Q,X,Y,Z,ee,te,se;function ne(t){e[1](t)}let le={columns:_};return void 0!==e[0]&&(le.items=e[0]),ee=new R({props:le}),S.push((()=>M(ee,"items",ne))),{c(){t=o("main"),s=o("section"),n=o("h3"),l=p("Description"),m=a(),g=o("p"),b=o("a"),y=p("This"),w=p(" component is able to display\r\n      arbitrarily large arrays of hex values (on the order of 10s of millions). It does this by only rendering to the DOM\r\n      the cells that are currently visible. A traditional scroll experience is emulated by including spacer elements above\r\n      and below the visible cells, as well as recalculating the currently visible cells as the component is scrolled."),T=a(),E=o("h3"),x=p("Problems"),D=a(),A=o("h4"),I=o("a"),B=p("Infinite Scroll Bug"),F=a(),U=o("p"),W=p('Without the hacky fix linked above, upon scrolling down the component will undergo rapid and uncontrolled infinite\r\n      scrolling that is multiplied by the scroll "momentum". This behavior can be seen by setting the prevent scroll bug\r\n      to false.'),C=a(),z=o("h4"),L=p("Weird Snapping"),V=a(),G=o("p"),j=p("Even with this fix there is this weird snapping behavior that happens when the topmost element is removed from the\r\n      DOM. This can be prevented by setting the offset to greater than 25 for slow speeds and 50 for higher speeds. This\r\n      offset is added to the top spacer element. I have correlated this to mean this behavior doesn't happen when the\r\n      element being removed is visibile. But only when going down."),J=a(),K=o("p"),Q=p("What's perplexing is fourfold. These issues only happen when scrolling down. The snapping doesn't happen with\r\n      autoscrolling (but infinite scroll does without hacky fix). Increasing the offset seems to prevent the infinite\r\n      scrolling. Finally, these issues don't seem to happen in Firefox regardless of the size of the offset, or\r\n      use of the hacky fix."),X=a(),Y=o("section"),Z=o("div"),P(ee.$$.fragment),this.h()},l(e){t=i(e,"MAIN",{class:!0});var r=c(t);s=i(r,"SECTION",{class:!0});var o=c(s);n=i(o,"H3",{class:!0});var a=c(n);l=v(a,"Description"),a.forEach(f),m=h(o),g=i(o,"P",{class:!0});var u=c(g);b=i(u,"A",{href:!0,class:!0});var d=c(b);y=v(d,"This"),d.forEach(f),w=v(u," component is able to display\r\n      arbitrarily large arrays of hex values (on the order of 10s of millions). It does this by only rendering to the DOM\r\n      the cells that are currently visible. A traditional scroll experience is emulated by including spacer elements above\r\n      and below the visible cells, as well as recalculating the currently visible cells as the component is scrolled."),u.forEach(f),T=h(o),E=i(o,"H3",{class:!0});var p=c(E);x=v(p,"Problems"),p.forEach(f),D=h(o),A=i(o,"H4",{class:!0});var S=c(A);I=i(S,"A",{href:!0,class:!0});var M=c(I);B=v(M,"Infinite Scroll Bug"),M.forEach(f),S.forEach(f),F=h(o),U=i(o,"P",{class:!0});var P=c(U);W=v(P,'Without the hacky fix linked above, upon scrolling down the component will undergo rapid and uncontrolled infinite\r\n      scrolling that is multiplied by the scroll "momentum". This behavior can be seen by setting the prevent scroll bug\r\n      to false.'),P.forEach(f),C=h(o),z=i(o,"H4",{class:!0});var N=c(z);L=v(N,"Weird Snapping"),N.forEach(f),V=h(o),G=i(o,"P",{class:!0});var $=c(G);j=v($,"Even with this fix there is this weird snapping behavior that happens when the topmost element is removed from the\r\n      DOM. This can be prevented by setting the offset to greater than 25 for slow speeds and 50 for higher speeds. This\r\n      offset is added to the top spacer element. I have correlated this to mean this behavior doesn't happen when the\r\n      element being removed is visibile. But only when going down."),$.forEach(f),J=h(o),K=i(o,"P",{class:!0});var H=c(K);Q=v(H,"What's perplexing is fourfold. These issues only happen when scrolling down. The snapping doesn't happen with\r\n      autoscrolling (but infinite scroll does without hacky fix). Increasing the offset seems to prevent the infinite\r\n      scrolling. Finally, these issues don't seem to happen happen in Firefox regardless of the size of the offset, or\r\n      use of the hacky fix."),H.forEach(f),o.forEach(f),X=h(r),Y=i(r,"SECTION",{class:!0});var O=c(Y);Z=i(O,"DIV",{class:!0});var q=c(Z);k(ee.$$.fragment,q),q.forEach(f),O.forEach(f),r.forEach(f),this.h()},h(){u(n,"class","svelte-mdrt6u"),u(b,"href","//github.com/DamenH/hex-viewer/blob/master/src/lib/SmartDataGrid.svelte"),u(b,"class","svelte-mdrt6u"),u(g,"class","svelte-mdrt6u"),u(E,"class","svelte-mdrt6u"),u(I,"href","//github.com/DamenH/hex-viewer/blob/master/src/lib/SmartDataGrid.svelte#L89"),u(I,"class","svelte-mdrt6u"),u(A,"class","svelte-mdrt6u"),u(U,"class","svelte-mdrt6u"),u(z,"class","svelte-mdrt6u"),u(G,"class","svelte-mdrt6u"),u(K,"class","svelte-mdrt6u"),u(s,"class","description svelte-mdrt6u"),u(Z,"class","data-grid svelte-mdrt6u"),u(Y,"class","svelte-mdrt6u"),u(t,"class","svelte-mdrt6u")},m(e,o){r(e,t,o),d(t,s),d(s,n),d(n,l),d(s,m),d(s,g),d(g,b),d(b,y),d(g,w),d(s,T),d(s,E),d(E,x),d(s,D),d(s,A),d(A,I),d(I,B),d(s,F),d(s,U),d(U,W),d(s,C),d(s,z),d(z,L),d(s,V),d(s,G),d(G,j),d(s,J),d(s,K),d(K,Q),d(t,X),d(t,Y),d(Y,Z),N(ee,Z,null),se=!0},p(e,[t]){const s={};!te&&1&t&&(te=!0,s.items=e[0],$((()=>te=!1))),ee.$set(s)},i(e){se||(H(ee.$$.fragment,e),se=!0)},o(e){O(ee.$$.fragment,e),se=!1},d(e){e&&f(t),q(ee)}}}let _=16;function J(e,t,s){let n;return s(0,n=new Array(65536).fill(0).map((()=>Math.floor(255*Math.random())))),[n,function(e){n=e,s(0,n)}]}new class extends e{constructor(e){super(),t(this,e,J,j,s,{})}}({target:document.getElementById("app")});
