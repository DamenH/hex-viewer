import{S as e,i as t,s,a as n,e as l,b as o,c as a,d as r,f as i,g as h,h as c,j as f,k as d,l as u,t as p,m as v,n as g,o as m,p as b,q as w,r as y,u as E,v as T,w as D,x,y as N,z as A,A as I,B as O,C as S,D as P,E as B,F as H,G as M,H as $,I as k,J as W}from"./vendor.3e44964a.js";const{window:U}=A;function q(e,t,s){const n=e.slice();return n[30]=t[s],n[32]=s,n}function G(e,t,s){const n=e.slice();return n[33]=t[s],n[35]=s,n}function L(e){let t,s=Array(Math.ceil(e[3].length/e[0])),n=[];for(let l=0;l<s.length;l+=1)n[l]=F(q(e,s,l));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=l()},l(e){for(let t=0;t<n.length;t+=1)n[t].l(e);t=l()},m(e,s){for(let t=0;t<n.length;t+=1)n[t].m(e,s);o(e,t,s)},p(e,l){if(9&l[0]){let o;for(s=Array(Math.ceil(e[3].length/e[0])),o=0;o<s.length;o+=1){const a=q(e,s,o);n[o]?n[o].p(a,l):(n[o]=F(a),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},d(e){m(n,e),e&&f(t)}}}function C(e){let t,s,n=`0${e[3][e[32]*e[0]+e[35]].toString(16).toUpperCase()}`.slice(-2)+"";return{c(){t=a("span"),s=p(n),this.h()},l(e){t=i(e,"SPAN",{class:!0});var l=h(t);s=v(l,n),l.forEach(f),this.h()},h(){d(t,"class","row-item svelte-q94vtm")},m(e,n){o(e,t,n),u(t,s)},p(e,t){9&t[0]&&n!==(n=`0${e[3][e[32]*e[0]+e[35]].toString(16).toUpperCase()}`.slice(-2)+"")&&g(s,n)},d(e){e&&f(t)}}}function F(e){let t,s,n=Array(e[0]),l=[];for(let o=0;o<n.length;o+=1)l[o]=C(G(e,n,o));return{c(){t=a("span");for(let e=0;e<l.length;e+=1)l[e].c();s=r(),this.h()},l(e){t=i(e,"SPAN",{class:!0});var n=h(t);for(let t=0;t<l.length;t+=1)l[t].l(n);s=c(n),n.forEach(f),this.h()},h(){d(t,"class","data-row svelte-q94vtm")},m(e,n){o(e,t,n);for(let s=0;s<l.length;s+=1)l[s].m(t,null);u(t,s)},p(e,o){if(9&o[0]){let a;for(n=Array(e[0]),a=0;a<n.length;a+=1){const r=G(e,n,a);l[a]?l[a].p(r,o):(l[a]=C(r),l[a].c(),l[a].m(t,s))}for(;a<l.length;a+=1)l[a].d(1);l.length=n.length}},d(e){e&&f(t),m(l,e)}}}function z(e){var t;let s,l,m,D,x,N,A,I,O,S,P,B,H,M,$,k,W,q,G,C,F,z,V,R,j,Y,_,J,K,Q,X,Z,ee,te,se,ne,le,oe,ae,re,ie;n(e[12]);let he=(null==(t=e[3])?void 0:t.length)&&L(e);return{c(){s=a("div"),l=a("div"),m=r(),he&&he.c(),D=r(),x=a("div"),N=r(),A=a("table"),I=a("tr"),O=a("td"),S=a("button"),P=p("Dec"),B=a("button"),H=p("Inc"),M=r(),$=a("td"),k=a("input"),W=r(),q=a("td"),G=a("label"),C=p("Top Offset: "),F=p(e[4]),z=r(),V=a("td"),R=r(),j=a("tr"),Y=a("td"),_=a("button"),J=p("Toggle"),K=p(" Autoscroll:\n      "),Q=a("span"),X=p(e[5]),Z=r(),ee=a("tr"),te=a("td"),se=a("button"),ne=p("Toggle"),le=p(" Prevent Scroll Down Bug:\n      "),oe=a("span"),ae=p(e[6]),this.h()},l(t){s=i(t,"DIV",{class:!0});var n=h(s);l=i(n,"DIV",{class:!0,style:!0}),h(l).forEach(f),m=c(n),he&&he.l(n),D=c(n),x=i(n,"DIV",{class:!0,style:!0}),h(x).forEach(f),n.forEach(f),N=c(t),A=i(t,"TABLE",{});var o=h(A);I=i(o,"TR",{});var a=h(I);O=i(a,"TD",{});var r=h(O);S=i(r,"BUTTON",{});var d=h(S);P=v(d,"Dec"),d.forEach(f),B=i(r,"BUTTON",{});var u=h(B);H=v(u,"Inc"),u.forEach(f),r.forEach(f),M=c(a),$=i(a,"TD",{});var p=h($);k=i(p,"INPUT",{type:!0,min:!0,max:!0,name:!0}),p.forEach(f),W=c(a),q=i(a,"TD",{});var g=h(q);G=i(g,"LABEL",{for:!0});var b=h(G);C=v(b,"Top Offset: "),F=v(b,e[4]),b.forEach(f),g.forEach(f),z=c(a),V=i(a,"TD",{}),h(V).forEach(f),a.forEach(f),R=c(o),j=i(o,"TR",{});var w=h(j);Y=i(w,"TD",{colspan:!0});var y=h(Y);_=i(y,"BUTTON",{});var E=h(_);J=v(E,"Toggle"),E.forEach(f),K=v(y," Autoscroll:\n      "),Q=i(y,"SPAN",{style:!0});var T=h(Q);X=v(T,e[5]),T.forEach(f),y.forEach(f),w.forEach(f),Z=c(o),ee=i(o,"TR",{});var U=h(ee);te=i(U,"TD",{colspan:!0});var L=h(te);se=i(L,"BUTTON",{});var re=h(se);ne=v(re,"Toggle"),re.forEach(f),le=v(L," Prevent Scroll Down Bug:\n      "),oe=i(L,"SPAN",{style:!0});var ie=h(oe);ae=v(ie,e[6]),ie.forEach(f),L.forEach(f),U.forEach(f),o.forEach(f),this.h()},h(){d(l,"class","data-grid-space svelte-q94vtm"),b(l,"height",e[7]+"px"),d(x,"class","data-grid-space svelte-q94vtm"),b(x,"height",e[8]+"px"),d(s,"class","data-grid svelte-q94vtm"),d(k,"type","range"),d(k,"min","-50"),d(k,"max","50"),d(k,"name","offset"),d(G,"for","offset"),b(Q,"font-weight","bold"),d(Y,"colspan","4"),b(oe,"font-weight","bold"),d(te,"colspan","4")},m(t,n){o(t,s,n),u(s,l),u(s,m),he&&he.m(s,null),u(s,D),u(s,x),e[13](s),o(t,N,n),o(t,A,n),u(A,I),u(I,O),u(O,S),u(S,P),u(O,B),u(B,H),u(I,M),u(I,$),u($,k),w(k,e[4]),u(I,W),u(I,q),u(q,G),u(G,C),u(G,F),u(I,z),u(I,V),u(A,R),u(A,j),u(j,Y),u(Y,_),u(_,J),u(Y,K),u(Y,Q),u(Q,X),u(A,Z),u(A,ee),u(ee,te),u(te,se),u(se,ne),u(te,le),u(te,oe),u(oe,ae),re||(ie=[y(U,"scroll",e[9],!0),y(U,"resize",e[12]),y(S,"click",e[14]),y(B,"click",e[15]),y(k,"change",e[16]),y(k,"input",e[16]),y(_,"click",e[17]),y(se,"click",e[18])],re=!0)},p(e,t){var n;128&t[0]&&b(l,"height",e[7]+"px"),(null==(n=e[3])?void 0:n.length)?he?he.p(e,t):(he=L(e),he.c(),he.m(s,D)):he&&(he.d(1),he=null),256&t[0]&&b(x,"height",e[8]+"px"),16&t[0]&&w(k,e[4]),16&t[0]&&g(F,e[4]),32&t[0]&&g(X,e[5]),64&t[0]&&g(ae,e[6])},i:E,o:E,d(t){t&&f(s),he&&he.d(),e[13](null),t&&f(N),t&&f(A),re=!1,T(ie)}}}function V(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(l,o){function a(e){try{i(n.next(e))}catch(t){o(t)}}function r(e){try{i(n.throw(e))}catch(t){o(t)}}function i(e){var t;e.done?l(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}i((n=n.apply(e,t||[])).next())}))};let l,o,a,r,i,h,c,{items:f}=t,{columns:d}=t,{cellHeight:u=21}=t,p=[],v=0,g=!1,m=!0;function b(){let e=l.scrollTop,t=l.scrollTop+r,n=Math.floor(e/u)*d,h=Math.ceil(t/u)*d;h=Math.min(f.length,h),i=o<n?"UP":"DOWN",console.log(i),[o,a]=[n,h],s(3,p=f.slice(n,h))}function w(){s(7,h=Math.floor(o/d)*u+v),s(8,c=Math.floor((f.length-a)/d)*u)}D((()=>n(void 0,void 0,void 0,(function*(){b(),w()}))));let y=0,E=0,T=0;x((()=>{var e;E=null!==(e=null==l?void 0:l.scrollTop)&&void 0!==e?e:0,m&&T<0&&s(1,l.scrollTop=l.scrollTop+T,l)})),N((()=>{var e;y=null!==(e=null==l?void 0:l.scrollTop)&&void 0!==e?e:0,T=E-y})),window.requestAnimationFrame((function e(){g&&s(1,l.scrollTop+=1,l),window.requestAnimationFrame(e)}));return e.$$set=e=>{"items"in e&&s(10,f=e.items),"columns"in e&&s(0,d=e.columns),"cellHeight"in e&&s(11,u=e.cellHeight)},[d,l,r,p,v,g,m,h,c,function(e){return n(this,void 0,void 0,(function*(){b(),w()}))},f,u,function(){s(2,r=U.innerHeight)},function(e){I[e?"unshift":"push"]((()=>{l=e,s(1,l)}))},()=>s(4,v--,v),()=>s(4,v++,v),function(){v=O(this.value),s(4,v)},()=>s(5,g=!g),()=>s(6,m=!m)]}class R extends e{constructor(e){super(),t(this,e,V,z,s,{items:10,columns:0,cellHeight:11},[-1,-1])}}function j(e){let t,s,n,l,g,m,b,w,y,E,T,D,x,N,A,O,U,q,G,L,C,F,z,V,j,_,J,K,Q,X,Z,ee,te,se;function ne(t){e[1](t)}let le={columns:Y};return void 0!==e[0]&&(le.items=e[0]),ee=new R({props:le}),I.push((()=>S(ee,"items",ne))),{c(){t=a("main"),s=a("section"),n=a("h3"),l=p("Description"),g=r(),m=a("p"),b=a("a"),w=p("This"),y=p(" component is able to display\n      arbitrarily large arrays of hex values (on the order of 10s of millions). It does this by only rendering to the DOM\n      the cells that are currently visible. A traditional scroll experience is emulated by including spacer elements above\n      and below the visible cells, as well as recalculating the currently visible cells as the component is scrolled."),E=r(),T=a("h3"),D=p("Problems"),x=r(),N=a("h4"),A=a("a"),O=p("Infinite Scroll Bug"),U=r(),q=a("p"),G=p('Without the hacky fix linked above, upon scrolling down the component will undergo rapid and uncontrolled infinite\n      scrolling that is multiplied by the scroll "momentum". This behavior can be seen by setting the prevent scroll bug\n      to false.'),L=r(),C=a("h4"),F=p("Weird Snapping"),z=r(),V=a("p"),j=p("Even with this fix there is this weird snapping behavior that happens when the topmost element is removed from the\n      DOM. This can be prevented by setting the offset to greater than 25. This offset is added to the top spacer\n      element. I have correlated this to mean this behavior doesn't happen when the element being removed is visibile.\n      BUT ONLY WHEN GOING DOWN."),_=r(),J=a("p"),K=p("What's perplexing is threefold. Neither of these issues only happen when scrolling down. Neither of these issues\n      happen when autoscrolling (but slow middle mouse down still does). And finally, neither of these issues happen in\n      Firefox regardless of the size of the offset, or use of hacky fix."),Q=r(),X=a("section"),Z=a("div"),P(ee.$$.fragment),this.h()},l(e){t=i(e,"MAIN",{class:!0});var o=h(t);s=i(o,"SECTION",{class:!0});var a=h(s);n=i(a,"H3",{});var r=h(n);l=v(r,"Description"),r.forEach(f),g=c(a),m=i(a,"P",{class:!0});var d=h(m);b=i(d,"A",{href:!0});var u=h(b);w=v(u,"This"),u.forEach(f),y=v(d," component is able to display\n      arbitrarily large arrays of hex values (on the order of 10s of millions). It does this by only rendering to the DOM\n      the cells that are currently visible. A traditional scroll experience is emulated by including spacer elements above\n      and below the visible cells, as well as recalculating the currently visible cells as the component is scrolled."),d.forEach(f),E=c(a),T=i(a,"H3",{});var p=h(T);D=v(p,"Problems"),p.forEach(f),x=c(a),N=i(a,"H4",{});var I=h(N);A=i(I,"A",{href:!0});var S=h(A);O=v(S,"Infinite Scroll Bug"),S.forEach(f),I.forEach(f),U=c(a),q=i(a,"P",{class:!0});var P=h(q);G=v(P,'Without the hacky fix linked above, upon scrolling down the component will undergo rapid and uncontrolled infinite\n      scrolling that is multiplied by the scroll "momentum". This behavior can be seen by setting the prevent scroll bug\n      to false.'),P.forEach(f),L=c(a),C=i(a,"H4",{});var H=h(C);F=v(H,"Weird Snapping"),H.forEach(f),z=c(a),V=i(a,"P",{class:!0});var M=h(V);j=v(M,"Even with this fix there is this weird snapping behavior that happens when the topmost element is removed from the\n      DOM. This can be prevented by setting the offset to greater than 25. This offset is added to the top spacer\n      element. I have correlated this to mean this behavior doesn't happen when the element being removed is visibile.\n      BUT ONLY WHEN GOING DOWN."),M.forEach(f),_=c(a),J=i(a,"P",{class:!0});var $=h(J);K=v($,"What's perplexing is threefold. Neither of these issues only happen when scrolling down. Neither of these issues\n      happen when autoscrolling (but slow middle mouse down still does). And finally, neither of these issues happen in\n      Firefox regardless of the size of the offset, or use of hacky fix."),$.forEach(f),a.forEach(f),Q=c(o),X=i(o,"SECTION",{});var k=h(X);Z=i(k,"DIV",{class:!0});var W=h(Z);B(ee.$$.fragment,W),W.forEach(f),k.forEach(f),o.forEach(f),this.h()},h(){d(b,"href","//github.com/DamenH/hex-viewer/blob/master/src/lib/SmartDataGrid.svelte"),d(m,"class","svelte-14353eg"),d(A,"href","//github.com/DamenH/hex-viewer/blob/master/src/lib/SmartDataGrid.svelte#L89"),d(q,"class","svelte-14353eg"),d(V,"class","svelte-14353eg"),d(J,"class","svelte-14353eg"),d(s,"class","description svelte-14353eg"),d(Z,"class","data-grid svelte-14353eg"),d(t,"class","svelte-14353eg")},m(e,a){o(e,t,a),u(t,s),u(s,n),u(n,l),u(s,g),u(s,m),u(m,b),u(b,w),u(m,y),u(s,E),u(s,T),u(T,D),u(s,x),u(s,N),u(N,A),u(A,O),u(s,U),u(s,q),u(q,G),u(s,L),u(s,C),u(C,F),u(s,z),u(s,V),u(V,j),u(s,_),u(s,J),u(J,K),u(t,Q),u(t,X),u(X,Z),H(ee,Z,null),se=!0},p(e,[t]){const s={};!te&&1&t&&(te=!0,s.items=e[0],M((()=>te=!1))),ee.$set(s)},i(e){se||($(ee.$$.fragment,e),se=!0)},o(e){k(ee.$$.fragment,e),se=!1},d(e){e&&f(t),W(ee)}}}let Y=16;function _(e,t,s){let n;return s(0,n=new Array(65536).fill(0).map((()=>Math.floor(255*Math.random())))),[n,function(e){n=e,s(0,n)}]}new class extends e{constructor(e){super(),t(this,e,_,j,s,{})}}({target:document.getElementById("app")});
